# ğŸ DÃ©boguer

DÃ©boguer signifie observer lâ€™exÃ©cution de notre programme Ã©tape par Ã©tape pour comprendre son comportement, trouver des erreurs (bugs), ou vÃ©rifier lâ€™Ã©tat des variables.

PyCharm offre un excellent environnement de dÃ©bogage avec des outils visuels intÃ©grÃ©s.

---

## Point d'arrÃªt

Un **point dâ€™arrÃªt** (*breakpoint*) permet de dire Ã  PyCharm : "ArrÃªte ici quand tu exÃ©cutes le programme."

1. Ouvrir un fichier `.py`.
2. Cliquer dans la marge gauche Ã  cÃ´tÃ© dâ€™une ligne de code pour y placer un point rouge (le point dâ€™arrÃªt).
<Row>
<Column>

```python showLineNumbers
i = 0
while i < 5:
    carre = i * i
    print(f"{i}Â² = {carre}")
    i += 1
```

</Column>

<Column>
    ![point](/img/recettes/point_arret.png)
</Column>
</Row>
3. Cliquer sur le bouton ![point](/img/icons/debug.png) **Debug** (Ã  cÃ´tÃ© du bouton â–¶ Run).
4. Le programme sâ€™arrÃªtera Ã  cette ligne, et PyCharm affichera la fenÃªtre de dÃ©bogage
avec la pile d'appels Ã  gauche et les variables Ã  droite :

![point](/img/recettes/pile_variables.png)



:::note ExÃ©cution pas Ã  pas

Lorsquâ€™un point dâ€™arrÃªt est atteint, on peut faire :

- <img src={require('/img/icons/stop.png').default} alt="Stop" width="24" style={{ verticalAlign: 'middle' }} /> **Stop** : arrÃªter lâ€™exÃ©cution.
- <img src={require('/img/icons/resume.png').default} alt="Resume" width="24" style={{ verticalAlign: 'middle' }} /> **Resume** : continuer lâ€™exÃ©cution jusquâ€™au prochain point dâ€™arrÃªt rencontrÃ©.
- <img src={require('/img/icons/stepover.png').default} alt="Step Over" width="24" style={{ verticalAlign: 'middle' }} /> **Step Over** : exÃ©cuter la ligne actuelle (mais sans entrer dans les fonctions appelÃ©es).
- <img src={require('/img/icons/stepinto.png').default} alt="Step Into" width="24" style={{ verticalAlign: 'middle' }} /> **Step Into** : entrer dans la fonction appelÃ©e pour voir ce quâ€™elle fait.

:::

:::tip Supprimer un point dâ€™arrÃªt

Pour retirer un point dâ€™arrÃªt, cliquer Ã  nouveau dessus dans la marge gauche.

:::

---

## Ã‰valuer une expression

Quand l'exÃ©cution est arrÃªtÃ©e Ã  un point dâ€™arrÃªt, on peut **Ã©valuer** une expression, c'est-Ã -dire voir le rÃ©sultat dâ€™un calcul ou le contenu dâ€™une variable.

1. Cliquer dans l'espace **Evaluate Expression** dans la fenÃªtre de dÃ©bogage.
2. Taper ou copier-coller une expression Python (par ex. `i + 1`, `carre`, ou `i * i`).
3. Le rÃ©sultat sâ€™affiche immÃ©diatement, sans modifier le programme (dans *result*).

![point](/img/recettes/evaluate_expression.png)

---

## Visualiser la pile d'appels

:::tip Visualiser la pile d'appels

Le dÃ©bogueur permet d'inspecter tous les dÃ©tails de la pile d'appels.<br />

Copiez le code ci-dessous dans un script, mettez un point d'arrÃªt sur la ligne 12 (`valeur = ...`) et exÃ©cutez le script en mode dÃ©bogage.

```python showLineNumbers
def ajouter(x, y):
    return x + y

def multiplier(x, y):
    return x * y

def calculer_expression(a, b, c):
    somme = ajouter(a, b)
    resultat = multiplier(somme, c)
    return resultat

valeur = calculer_expression(2, 3, 4)
print(valeur)  # Affiche 20
```

Pour *entrer* dans les fonctions appelÃ©es en mode dÃ©bogage, il faut utiliser le bouton **Step Into** <img src={require('/img/icons/stepinto.png').default} alt="Step Into" width="24" style={{ verticalAlign: 'middle' }} />.<br />
Lorsque vous entrez dans la fonction `calculer_expression`, vous voyez :
- cette fonction s'ajouter au sommet de la pile d'appels (Ã  gauche),
- les paramÃ¨tres `a`, `b` et `c` apparaÃ®tre dans la liste des variables (Ã  droite) :

<img src={require('/img/recettes/pile_appels1.png').default} width="100%"/>

Si vous appuyez de nouveau sur <img src={require('/img/icons/stepinto.png').default} alt="Step Into" width="24" style={{ verticalAlign: 'middle' }} />, vous entrez dans la fonction `ajouter`.<br />
Vous pouvez voir que la fonction `ajouter` est maintenant au sommet de la pile d'appels, et les paramÃ¨tres `x` et `y` sont affichÃ©s dans la liste des variables :
<img src={require('/img/recettes/pile_appels2.png').default} width="100%"/>
Remarquez que les paramÃ¨tres `a`, `b` et `c` de `calculer_expression` ne sont plus visibles, car vous Ãªtes maintenant dans la fonction `ajouter` et `a`, `b` et `c` sont **hors de portÃ©e**.

Vous pouvez cliquer sur le nom de la fonction `calculer_expression` dans la pile d'appels pour revenir Ã  cette fonction et voir ses paramÃ¨tres Ã  nouveau :
<img src={require('/img/recettes/pile_appels3.png').default} width="100%"/>

:::

Lorsque vous faite une trace d'un code avec des appels de fonctions, il est nÃ©cessaire de noter la pile d'appels et les variables locales Ã  chaque Ã©tape.

Le dÃ©bogueur est alors le meilleur outil pour valider votre trace... sauf en examen!


